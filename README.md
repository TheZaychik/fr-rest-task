# fr-rest-task
### Тестовое задание (REST API)
***
#### Общая информация
Задание:
> Задача: спроектировать и разработать API для системы опросов пользователей.  
> Функционал для администратора системы:
>- авторизация в системе (регистрация не нужна)
>- добавление/изменение/удаление опросов. Атрибуты опроса: название, дата старта, дата окончания, описание. После создания поле "дата старта" у опроса менять нельзя
>- добавление/изменение/удаление вопросов в опросе. Атрибуты вопросов: текст вопроса, тип вопроса (ответ текстом, ответ с выбором одного варианта, ответ с выбором нескольких вариантов) 
> 
> Функционал для пользователей системы:
>- получение списка активных опросов
>- прохождение опроса: опросы можно проходить анонимно, в качестве идентификатора пользователя в API передаётся числовой ID, по которому сохраняются ответы пользователя на вопросы; один пользователь может участвовать в любом количестве опросов
>- получение пройденных пользователем опросов с детализацией по ответам (что выбрано) по ID уникальному пользователя

Использованные технологии Django 2.2.10 + DRF + MySQL
#### Внешние зависимости: 
```python
Django==2.2.10
djangorestframework==3.12.4
mysqlclient==2.0.3
pytz==2021.1
sqlparse==0.4.1
```
#### Развертывание:
1. Скачать репозиторий, и перенести файлы на свою машину (или сервер);
2. Установить Python версии, не ниже 3.8  
``$ sudo apt-get install python3``
3. Создать виртуальное окружение (удалив старое)  
``$ rm -rf venv``  
``$ python3 -m venv venv`` 
4. Подключить виртуальное окружение  
``$ source venv/bin/activate``   
5. Установить внешние зависимости в виртуальное окружение  
``$ pip3 install -r requirements.txt``
6. Установить MySQL (версии 8) на сервер  
``$ sudo apt install mysql-server mysql-client``
7. Произвести первоначальную настройку БД  
``$ sudo mysql_secure_installation``  
8. Создать базу данных и специального пользователя для сервиса  
```mysql
CREATE DATABASE <database>; # <имя_базы>
CREATE USER '<username>'@'localhost' IDENTIFIED BY 'password';
GRANT ALL ON <database>.* TO '<username>'@'localhost';
```
9. В `rest/rest/settings.py` сконфигурировать настройки DATABASES, прописав имя БД, а так же пользователя для взаимодействия
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'HOST': '127.0.0.1',
        'NAME': "<database>",
        'USER': '<username>',
        'PASSWORD': '<password>',
    },
}
```
10. Провести миграции в БД  
``$ python3 manage.py migrate``
11. Запустить решение  
``$ python3 manage.py runserver 0.0.0.0:8080``
>Для запуска тестов используйте    
``$ python3 manage.py test``
***
#### Документация по API





